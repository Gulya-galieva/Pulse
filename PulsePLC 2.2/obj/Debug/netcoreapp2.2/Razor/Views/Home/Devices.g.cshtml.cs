#pragma checksum "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "48e7020eacf315f24429e0e7e08ba9edd417d761"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Devices), @"mvc.1.0.view", @"/Views/Home/Devices.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Devices.cshtml", typeof(AspNetCore.Views_Home_Devices))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\_ViewImports.cshtml"
using PulsePLC_2._2;

#line default
#line hidden
#line 2 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\_ViewImports.cshtml"
using PulsePLC_2._2.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"48e7020eacf315f24429e0e7e08ba9edd417d761", @"/Views/Home/Devices.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"d4fcf3a7743bc0e31ace6220686e21b480767c28", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Devices : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<ContactListView>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 1 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"
  
    ViewData["Title"] = "";

#line default
#line hidden
            BeginContext(66, 317, true);
            WriteLiteral(@"<script>var idContact = '';</script>
<div id=""tableid"" class=""panel"">
    <div id=""buttonAdd"" class=""d-flex justify-content-between shadow p-3 mb-4 rounded"" style=""background: #808080"">
        
    </div>
    <table id=""table1"" class=""table1"">
        <tr>
            <th>Серийный номер</th>
        </tr>
");
            EndContext();
#line 14 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"
         foreach (var item in Model)
        {

#line default
#line hidden
            BeginContext(432, 75, true);
            WriteLiteral("            <tr>\r\n                <td style=\"text-align:center\"><a href=\"#\"");
            EndContext();
            BeginWriteAttribute("onclick", " onclick=\"", 507, "\"", 590, 9);
            WriteAttributeValue("", 517, "ShowEditMenu(\'", 517, 14, true);
#line 17 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"
WriteAttributeValue("", 531, item.devicesId, 531, 15, false);

#line default
#line hidden
            WriteAttributeValue("", 546, "\',", 546, 2, true);
            WriteAttributeValue(" ", 548, "\'", 549, 2, true);
#line 17 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"
WriteAttributeValue("", 550, item.serialNumber, 550, 18, false);

#line default
#line hidden
            WriteAttributeValue("", 568, "\',", 568, 2, true);
            WriteAttributeValue(" ", 570, "\'", 571, 2, true);
#line 17 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"
WriteAttributeValue("", 572, item.contactId, 572, 15, false);

#line default
#line hidden
            WriteAttributeValue("", 587, "\');", 587, 3, true);
            EndWriteAttribute();
            BeginContext(591, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(593, 17, false);
#line 17 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"
                                                                                                                                         Write(item.serialNumber);

#line default
#line hidden
            EndContext();
            BeginContext(610, 43, true);
            WriteLiteral("</a>\r\n                <script>idContact = \'");
            EndContext();
            BeginContext(654, 14, false);
#line 18 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"
                                Write(item.contactId);

#line default
#line hidden
            EndContext();
            BeginContext(668, 37, true);
            WriteLiteral("\';</script></td>\r\n            </tr>\r\n");
            EndContext();
#line 20 "D:\Repos\PulsePLC 2.2\PulsePLC 2.2\Views\Home\Devices.cshtml"

        }

#line default
#line hidden
            BeginContext(718, 8985, true);
            WriteLiteral(@"        <tr>
            <td></td>
        </tr>
    </table>
</div>

<div class=""modal fade"" id=""CreateDevice"" tabindex=""-1"" role=""dialog"" aria-labelledby=""exampleModalCenterTitle"" aria-hidden=""true"">
    <div class=""modal-dialog modal-dialog-centered modal-sm"" role=""document"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h4 class=""modal-title""><i class=""fa fa-plus-square"" aria-hidden=""true""></i> Добавление нового девайса</h4>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">&times;</span>
                </button>
            </div>
            <div class=""modal-body"">

            </div>
        </div>
    </div>
</div>


<div class=""modal fade"" id=""editModal"" tabindex=""-1"" role=""dialog"" aria-labelledby=""exampleModalCenterTitle"" aria-hidden=""true"">
    <div class=""modal-dialog modal-dialog-centered modal-sm"" role=""document"">
        <div class=""modal-content""");
            WriteLiteral(@">
            <div class=""modal-header"">
                <h4 class=""modal-title"" id=""idAccepted"">№</h4>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">&times;</span>
                </button>
            </div>
            <div class=""modal-body"">
            
            </div>
        </div>
    </div>
</div>
                    

<script>
    var htmlMove = '';
    var idDevice;
    //var idContact = ;
     
    var serialNumb;

    function ButtonAdd() {
        let html = """";
        if (idContact == 1 || idContact == '') {
            html = '<button class=""btn btn-outline-light"" onclick=""ShowAddMenu()""><b>+</b></button>';
        }
        //html += '<input type=""text"" class=""form-control"" id=""searchId"" placeholder=""Поиск..."" style=""width:300px;"" onchange=""Search()""/>';
        document.getElementById('buttonAdd').innerHTML = html;
    }
    ButtonAdd();

    function Search() {
        ");
            WriteLiteral(@"let search = document.getElementById('searchId').value;
        var request = new XMLHttpRequest();
        var body = ""id="" + encodeURIComponent(idContact) + ""&serial="" + encodeURIComponent(search);
        request.responseType = ""json"";
        request.open(""GET"", ""/Home/Devices"" + ""?"" + body);
        request.send(body);
        Uptable();
    }

    function ShowAddMenu() {
        Swal.fire({
            showConfirmButton: false,
            title: 'Добавление нового устройства',
            html:

                //'<button id=""editMain"" class=""btn btn-info"" style=""width:300px; margin: 3px;""><div style=""text-align: left; padding-left: 20%""><i class=""fas fa-pencil-alt""></i> Имя, Login, Email</div></button>' +
                //'<button id=""editRole"" class=""btn btn-info"" style=""width:300px; margin: 3px;""><div style=""text-align: left; padding-left: 20%""><i class=""fas fa-arrow-right""></i> Переместить в...</div></button>' +
                //'<button id=""editPass"" class=""btn btn-info"" style=");
            WriteLiteral(@"""width:300px; margin: 3px;""><div style=""text-align: left; padding-left: 20%""><i class=""fas fa-key""></i> Новый пароль</div></button>' +
                '<input type=""text"" class=""form-control"" id=""serialNumber"" placeholder=""Cерийный номер..."" style=""margin: 3px;""/>' +
                '<button id=""addDevice"" class=""btn btn-danger"" style=""width:200px; margin: 3px;"">Добавить</button>',
            onBeforeOpen: () => {
                const content = Swal.getContent()
                const $ = content.querySelector.bind(content)
                const addDevice = $('#addDevice');
                //const editRole = $('#editRole');
                //const editPass = $('#editPass');
                //const deleteUser = $('#deleteUser');
                addDevice.addEventListener('click', () => {
                    let name = document.getElementById('serialNumber').value;
                    AddDevice(name);

                    //EditMain(data); //Диалог: Изменить Имя, Login, Email
                });");
            WriteLiteral(@"
                //editRole.addEventListener('click', () => {
                //    UpdateRole(data); //Диалог: Изменить роль
                //});
                //editPass.addEventListener('click', () => {
                //    EditPass(data); //Диалог: Установить новый пароль
                //});
                //deleteUser.addEventListener('click', () => {
                //    DeleteUser(data); //Диалог: Удалить пользователя
                //});
            }
        })
    }

    function AddDevice(name) {
        var request = new XMLHttpRequest();
        var body = ""serialNumber="" + encodeURIComponent(name);
        request.responseType = ""json"";
        request.open(""GET"", ""/Device/AddDevice"" + ""?"" + body);
        request.onload = function () {
            if (this.response == 'Добавлен!') {
                ok(this.response);
                Updata();
            }
            else {
                err(this.response);
                Updata();
            }
        ");
            WriteLiteral(@"}
        request.send(body);

    }

    //Удалить
    function DeleteDevice() {
        Swal.fire({
            title: 'Удалить ' + serialNumb + '?',
            text: ""Это необратимое действие! Подумой..."",
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Да, удалить!',
            cancelButtonText: 'Отмена'
        }).then((result) => {
            var request = new XMLHttpRequest();
            var body = ""id="" + encodeURIComponent(idDevice);
            request.responseType = ""json"";
            request.open(""GET"", ""/Device/DeleteDevice"" + ""?"" + body);
            request.onload = function () {
                //alert(this.response);
                if (this.response == 'Устройство успешно удалено!') {
                    ok(this.response);
                    Updata();
                }
                else {
                    err(this.response)");
            WriteLiteral(@";
                    Updata();
                }
            }
            request.send();
        })


    }

    //Переместить
    function MoveDevice() {
        //alert('ok');
        let move = document.getElementById('moveDevice').value;
        //alert(move);
        //alert(idDevice);
        var request = new XMLHttpRequest();
        var body = ""idDevice="" + encodeURIComponent(idDevice) + ""&idContact="" + encodeURIComponent(move);
        request.responseType = ""json"";
        request.open(""GET"", ""/Device/MoveDevice"" + ""?"" + body);
        request.onload = function () {
            //alert(this.response);
            if (this.response == 'Устройство перемещено!') {
                ok(this.response);
                Updata();
            }
            else {
                err(this.response);
                Updata();
            }
            //htmlMove = this.response;

        }
        request.send();
    }

    //Список Contact
    function ShowMoveMenu(id) ");
            WriteLiteral(@"{
        var request = new XMLHttpRequest();
        var body = ""id="" + encodeURIComponent(id);
        request.responseType = ""json"";
        request.open(""GET"", ""/Device/GetListDevice"" + ""?"" + body);
        request.onload = function () {
            //alert(this.response);
            htmlMove = this.response;

        }
        request.send();

    }
    ShowMoveMenu(idContact);

    //Меню
    function ShowEditMenu(id, serial, contactId) {
        //width: 300px;
        idDevice = id;
        serialNumb = serial;
        //alert(sel);
        Swal.fire({
            showConfirmButton: false,
            title: 'Серийный номер: ' + serial,
            html:
                htmlMove,
                //'<button id=""editDevice"" class=""btn btn-info"" style=""width: 300px; margin: 3px;"">Переместить</button>' +
                //'<button id=""deleteDevice"" class=""btn btn-danger"" style=""width: 300px; margin: 3px;"">Удалить</button>',
            onBeforeOpen: () => {
                co");
            WriteLiteral(@"nst content = Swal.getContent()
                const $ = content.querySelector.bind(content)

                //const editDevice = $('#editDevice');
                //const deleteDevice = $('#deleteDevice');
                //const moveDevice = $('moveDevice');
                //editDevice.addEventListener('click', () => {
                //    UpdateRole(data); //Переместить
                //});
                //deleteDevice.addEventListener('click', () => {
                //    DeleteDevice(id); //Удалить
                //});
            }
        })
    }

    function Uptable() {
        $(""#table1"").load(location.href + "" #table1"");
        
    }
    
    function Updata() {
        $(""#tableid"").load(location.href + "" #tableid"");
    }

</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<ContactListView>> Html { get; private set; }
    }
}
#pragma warning restore 1591
